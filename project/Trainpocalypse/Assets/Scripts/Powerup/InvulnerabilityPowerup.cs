using System.Linq;
using Funk.Player;

namespace Funk.Powerup
{
    public class InvulnerabilityPowerup : PowerupBase
    {

        protected override void ApplyEffect()
        {
            _affectedPlayerState.IsInvulnerable = true;
        }

        protected override void UnapplyEffect()
        {
            IStateModifier[] powerups = _affectedPlayerState.ActiveModifiers.ToArray();
            for (int i = 0; i < powerups.Length; i++)
            {
                if (powerups[i].GetType() == typeof(InvulnerabilityPowerup))
                {
                    //has another invul. active, so we just return and leave it invul.
                    return;
                }
            }
            _affectedPlayerState.IsInvulnerable = false;
        }
    }
}
